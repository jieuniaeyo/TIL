# **인프런 아키텍처**

**시즌 1 -** 워드프레스 사용

→ 서비스 속도의 증가, 의도를 알 수 없는 데이터, 기능 확장의 한계, 직접 관리해야하는 서버/배포/DB

**시즌2 -** 기능은 유지 서비스만 수정

> FE, BE, DevOps js로 기술 스택 통일, 낮은 러닝 커브, 직접 관리 최소화
>

** 정적 HTML을 받아 직접 DOM을 조작하는 방식

→ 구현 코드의 최소화, 라이브러리의 단일화, SSR 패턴, 단일 프로젝트

but

** 구현 코드의 최소화로 타입이 없고 json 기반으로 통신해 콘솔로만 결과를 확인할 수 있음

→ 함수 결과 예측 불가, IDE 지원 없이 개발, 검증 X

** 단일화 된 라이브러리 (Fx 시리즈...)

→ 생소한 문법, 부족한 레퍼런스, 지원이 종료된 라이브러리

** 기존 개발자들에게 익숙한 패턴 (정적 HTML을 받아 직접 DOM을 조작하는 방식)

→ 신입 개발자들에게 익숙치 않은 패턴

** 단일 리포지토리에서 FE/BE 동시 개발

→ 불필요한 코드를 스캔함으로써 빌드 시간의 증가

**시즌3**

> class/type/test code.. 추가, 대중적인 스타일로 변경, FE/BE 독립 개발
>

but

** 3일 동안 매일 2시간씩 서버 종료 → 한 부분의 장애가 전체 장애로 퍼짐

? 모든 서비스가 구 인프런에서 관리..

**시즌4**

| 구 인프런들의 서비스들을 분리

but

** DB가 아직 분리되지 않음.. → 시즌5 예상, 아직 개편되지 않은 부분들이 많음

why?? 트랜잭션 관리의 어려움, 기존 쿼리 전체 개편 필요

** 요구사항의 7-80%를 만족하면서 2-3년까지 버틸 수 있는 최소한의 기술들 선택

**⇒ mongoDB** (DynamoDB과 같은 NoSQL, MongoDB Atlas에서 ES에서 지원하는 형태소 분석기 포함)

** 장애가 퍼지는 것을 막기 위해 신규 서비스부터는 장애 분리

ex) 검색 엔진 (SNS 멀티 구독 → SQS 최종적 일관성 → Spring Boot를 통한 배압 조절 → Zero Payload를 통한 이벤트 순서 보장)

but

** Node to SNS 실패하면??

→ 이벤트 저장소를 중간에 두면 해결 가능 하지만 아키텍처 복잡도가 높아져 현재는 에러 발생시 수동 재발행

처음부터 완벽하게 만들자! (X) 잘 고쳐쓰자! (O)

사용자가 요구하는 바를 요구한 타이밍에 출시!

### 질문
- 단순 서버 부하 때문에 매일 서버가 종료되었을까? -> 
[2022년 1월 100% 할인 이벤트 장애 부검](https://tech.inflab.com/202201-event-postmortem/#2-6-%EA%B7%BC%EB%B3%B8-%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D)
