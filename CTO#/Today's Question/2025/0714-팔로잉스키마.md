## Q. 팔로우 / 팔로잉 정보를 저장할 때 컬럼에 JSON 타입으로 저장해도 될까?

### 근거
- 팔로우 / 팔로잉 정보는 자주 바뀌는 테이블은 아닌 것 같음
- 오히려 팔로우 / 팔로잉 중간 테이블에 모든 사용자의 팔로우 / 팔로잉 정보를 저장하게 되면 사용량보다 테이블이 더 커지게 되는 문제가 있지 않을까? 라는 의문

---

## A. JSON 컬럼에 저장하는 건 비효율적이다.

### 이유
- **JSON 내부의 특정 값에 대해 인덱스를 걸 수 없음**
    
  **예: A 계정을 1,000만 명이 팔로우하고 있을 때** 

  한 명이 언팔 -> JSON에서 해당 팔로워 ID를 찾아서 삭제 후 전체 JSON을 다시 저장해야 함

  새로운 팔로워 추가 -> 기존 JSON을 읽고, 배열에 값 추가, 다시 저장

  반면 중간 테이블 사용 시 즉, 전체 구조를 다시 쓰지 않고 행 단위로 처리 가능

- **JOIN 불가능 → 확장성 저하**

  **예: "내가 팔로우하는 사람 중 최근 글을 쓴 사용자"를 찾으려면**

  JSON: 모든 팔로잉 ID를 애플리케이션 레벨로 가져와 필터링 → 쿼리 비효율 + 네트워크 부하
  중간 테이블: JOIN과 WHERE 절만으로 DB 내에서 처리 가능
- **정규화 위반 (제1정규형 위배)**
  
  제1정규형(1NF): 모든 컬럼은 **원자값**이어야 함


### 결론
- 팔로우/팔로잉 관계는 전형적인 N:N 관계 → 중간 테이블이 정석
- JSON 저장은 다음과 같은 경우에만 고려
  
  쿼리 성능이 중요하지 않고, 데이터 구조가 비정형적이며, 검색·JOIN 필요가 거의 없는 경우