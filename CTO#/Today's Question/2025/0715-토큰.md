## Q. TOKEN은 보통 쿠키나 세션에 저장하는데 외부에서 충분히 탈취 가능하지 않을까?

### 근거
- 토큰에는 사용자 식별 정보(예: userId, email)가 들어있을 수 있음
- 서버의 서명용 secret이 유출되면, 해당 secret으로 모든 토큰을 위조하거나 변조 가능
- 저장 위치에 따라 브라우저 스크립트, 앱 파일 시스템, 네트워크 스니핑 등을 통해 탈취 가능성이 존재

---

## A. 보안성을 높이기 위해 부수적인 설계가 필요하다

### 답변
- 액세스 토큰은 만료 기간을 짧게 가져가고 리프레스 토큰은 만료 기간을 길게 가져가 액세스 토큰이 탈취되어도 금방 만료되도록 설정하는 방안

### 토큰 수명 관리
- **Access Token**
    - 만료 기간을 짧게 설정 (예: 5분~1시간)
    - 탈취되더라도 금방 무효화되어 피해를 최소화
- **Refresh Token**
  - 상대적으로 긴 만료 기간 (예: 1주~1개월)
  - Access Token 재발급 용도로만 사용
  - 저장 위치에 더 강한 보안 적용


### 대부분의 아키텍처에서 사용하고 있는 토큰 저장 방식


- [웹]((https://www.youtube.com/watch?v=EnetEaN1h3M))
  - 액세스토큰 -> 메모리, js 변수, 로컬스토리지/세션
  - 리프레시토큰 -> 쿠키 (HttpOnly, Secure, SameSite 설정 필수)
- [앱](https://www.youtube.com/shorts/fyCVYLEXs2c)
  - iOS -> KeyChain
  - Android -> EncryptedSharedPreference
  - RN -> react-native-keychain
  - Expo -> expo-secure-store

### 정리
- Access Token은 짧게 쓰고 빠르게 버린다
- Refresh Token은 더 안전한 저장소에 둔다
- 저장 위치 선택 시, XSS/CSRF/물리적 탈취 위험을 모두 고려해야 한다